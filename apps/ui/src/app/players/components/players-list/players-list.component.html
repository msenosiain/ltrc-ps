<div class="players-list">
  <div class="table-container">

    <!-- Barra de acciones: filtro + botón -->
    <div class="actions-bar">
      <button mat-raised-button color="tertiary" (click)="openPlayerModal()">
        Agregar Jugador
      </button>
    </div>

    <!-- Componente de búsqueda -->
    <ltrc-player-search (filtersChange)="applyFilters($event)"></ltrc-player-search>

    <!-- Tabla de jugadores -->
    <table mat-table [dataSource]="dataSource" matSort class="mat-elevation-z8">

      <ng-container matColumnDef="photoId">
        <th mat-header-cell *matHeaderCellDef></th>
        <td mat-cell *matCellDef="let player">
          @if (player.photoId) {
            <img
              [src]="getPlayerPhotoUrl(player.id)"
              alt="{{ player.firstName }} {{ player.lastName }}"
              class="player-photo"
            />
          } @else {
            <img
              src="/placeholder.jpg"
              alt="{{ player.firstName }} {{ player.lastName }}"
              class="player-photo"
            />
          }
        </td>
      </ng-container>

      <!-- First Name -->
      <ng-container matColumnDef="firstName">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Nombre</th>
        <td mat-cell *matCellDef="let player">{{ player.firstName }}</td>
      </ng-container>

      <!-- Last Name -->
      <ng-container matColumnDef="lastName">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Apellido</th>
        <td mat-cell *matCellDef="let player">{{ player.lastName }}</td>
      </ng-container>

      <!-- Nickname -->
      <ng-container matColumnDef="nickName">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Apodo</th>
        <td mat-cell *matCellDef="let player">{{ player.nickName }}</td>
      </ng-container>

      <!-- Position -->
      <ng-container matColumnDef="position">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Posición</th>
        <td mat-cell *matCellDef="let player">{{ getPositionLabel(player.position) }}</td>
      </ng-container>

      <!-- Alt Position -->
      <ng-container matColumnDef="alternatePosition">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Posición Alternativa</th>
        <td mat-cell *matCellDef="let player">{{ getPositionLabel(player.alternatePosition) }}</td>
      </ng-container>

      <!-- Header y filas -->
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row (click)="viewPlayerDetails(row.id)" *matRowDef="let row; columns: displayedColumns"></tr>
    </table>

    <!-- Paginador -->
    <mat-paginator
      [pageSize]="10"
      [pageSizeOptions]="[5, 10, 20]"
      showFirstLastButtons>
    </mat-paginator>

  </div>
</div>
